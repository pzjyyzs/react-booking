{"version":3,"sources":["hooks/useUpdate.tsx","lib/createId.tsx","hooks/useRecords.tsx","hooks/useTags.tsx","views/money/style-components.ts","views/money/money-category/index.tsx","views/money/money-note/index.tsx","views/money/money-number/index.tsx","views/money/money-number/utils.ts","views/money/money-tag/index.tsx","views/money/index.tsx","views/no-match/index.tsx","components/Nav/style-components.ts","components/Nav/index.tsx","components/Layout/style-components.ts","components/Layout/index.tsx","views/statistics/style-component.ts","views/statistics/bar-chart.tsx","views/statistics/index.tsx","views/tag/style-component.ts","views/tag/index.tsx","views/tags/style-component.ts","views/tags/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["useUpdate","fn","deps","count","useRef","useEffect","current","id","parseInt","window","localStorage","getItem","useRecords","useState","records","setRecords","total","JSON","parse","month","Date","getMonth","filterData","filter","item","day","createdAt","format","toString","setItem","stringify","addRecord","newRecord","parseFloat","amount","alert","tagIds","record","toISOString","findRecord","find","updateRecord","note","map","delRecord","tag","getStatisticsData","type","totalDaylen","daysInMonth","i","push","totalPrice","date","category","reduce","add","getTypeTotalAmount","getTagsTotalAmount","tagArr","tagObj","key","tagid","sort","a","b","defaultTags","name","icon","faUtensils","faBus","faToiletPaper","faTshirt","faGamepad","faGraduationCap","faHospital","faBolt","faPhone","faEllipsisV","faMoneyBill","faYenSign","faChartLine","faCoins","useTags","tags","getTag","findTag","MoneyTagStyle","styled","div","MoneyNoteStyle","MoneyCategoryStyle","MoneyNumberStyle","MyLayout","TagIcon","FontAwesomeIcon","MoneyCategory","props","catelist","value","categoryMap","onClick","createHashHistory","goBack","faChevronLeft","cate","className","onChange","onCategoryChange","MoneyNote","e","target","placeholder","MoneyNumber","output","text","textContent","length","slice","setOutput","indexOf","numberOutput","onOk","MoneyTag","selectedTags","defaultFormData","Money","selected","setSelected","obj","layoutChange","Nomatch","MyNav","nav","MyLink","NavLink","MyIcon","Nav","to","activeClassName","FaIcons","Wrapper","Main","Layout","children","StaWrapper","StaHeader","header","StaList","BarChart","option","container","chart","width","document","documentElement","clientWidth","style","height","echarts","setOption","ref","Statistics","setType","tagsAmount","title","useCallback","totalAmount","tooltip","xAxis","data","yAxis","series","onTagChange","TagHeader","InputTitle","ButtonGroup","Tag","useParams","setObj","onPushBack","onInputChange","TagsWrapper","Header","Title","Info","Calendar","Total","Tags","isEmpty","setIsEmpty","isLoading","setLoading","getRevenue","getFullYear","faExclamationCircle","App","exact","path","from","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0b8b18d3.chunk.js","sourcesContent":["import { useEffect, useRef } from \"react\"\r\n\r\nexport const useUpdate = (fn: () => void, deps: any) => {\r\n    const count = useRef(0);\r\n    useEffect(() => {\r\n        count.current += 1;\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (count.current > 1) {\r\n            fn()\r\n        }\r\n    }, [deps, fn]);\r\n}","let id = parseInt(window.localStorage.getItem('idMax') || '0');\r\nconst createId = ():number => {\r\n  id += 1;\r\n  window.localStorage.setItem('idMax', JSON.stringify(id))\r\n  return id;\r\n};\r\n\r\nexport {createId};","import { useEffect, useState } from \"react\";\r\nimport { useUpdate } from \"./useUpdate\";\r\nimport { createId } from \"lib/createId\";\r\nimport day from 'dayjs';\r\nimport { add } from \"mathjs\";\r\n\r\nexport type RecordItem = {\r\n    id: string\r\n    tagIds: number\r\n    note: string\r\n    category: 'pay' | 'revenue'\r\n    amount: string\r\n    createdAt: string // ISO 8601\r\n}\r\nexport const useRecords = () => {\r\n    const [records, setRecords] = useState<RecordItem[]>([]);\r\n    useEffect(() => {\r\n        let total = JSON.parse(window.localStorage.getItem('records') || '[]');\r\n        let month = new Date().getMonth() + 1;\r\n        let filterData = total.filter((item: any) => day(item.createdAt).format('MM') === month.toString());\r\n        setRecords(filterData);\r\n    }, []);\r\n\r\n    useUpdate(() => {\r\n        window.localStorage.setItem('records', JSON.stringify(records));\r\n    }, records);\r\n\r\n    const addRecord = (newRecord: any) => {\r\n        if (parseFloat(newRecord.amount) <= 0) {\r\n          alert('请输入金额');\r\n          return false;\r\n        }\r\n        if (newRecord.tagIds === null) {\r\n          alert('请选择标签');\r\n          return false;\r\n        }\r\n        const record = {...newRecord, createdAt: (new Date()).toISOString(), id: createId().toString()};\r\n        setRecords([...records, record]);\r\n        return true;\r\n    };\r\n\r\n    const findRecord = (id: string) => {\r\n        return records.find(item => item.id === id);\r\n    }\r\n\r\n    const updateRecord = (id: string, { note, amount }: {note: string, amount: string}) => {\r\n        setRecords(records.map(item => item.id === id ? { ...item, note, amount } : item));\r\n    }\r\n\r\n    const delRecord = (id: string) => {\r\n        setRecords(records.filter(tag => tag.id !== id));\r\n    }\r\n\r\n    const getStatisticsData = (type: string) => {\r\n        const totalDaylen = day(new Date()).daysInMonth();\r\n        let month = [];\r\n        for(let i = 1; i<= totalDaylen; i++) {\r\n            month.push(i);\r\n        }\r\n\r\n        const totalPrice = month.map(date => {\r\n        return records\r\n            .filter(item => item.category === type && day(item.createdAt).format('DD') === date.toString())\r\n            .reduce((total: any, item) => {\r\n                return add(parseFloat(item.amount), total);\r\n            }, 0);\r\n        })\r\n        return { month, totalPrice}\r\n    }\r\n\r\n    const getTypeTotalAmount = (type: string) => {\r\n        return records\r\n        .filter(item => item.category === type )\r\n        .reduce((total: any, item) => {\r\n            return add(parseFloat(item.amount), total);\r\n        }, 0);\r\n    }\r\n\r\n    const getTagsTotalAmount = (type: string) => {\r\n        let tagArr = [];\r\n        const tagObj = records\r\n            .filter(item => item.category === type)\r\n            .reduce((total: any, item) => {\r\n                if (total[item.tagIds]) {\r\n                    total[item.tagIds]  = add(total[item.tagIds], parseFloat(item.amount))\r\n                } else {\r\n                    total[item.tagIds] = parseFloat(item.amount);\r\n                }\r\n                return total\r\n            }, {});\r\n        for(let key in tagObj) {\r\n            tagArr.push({\r\n                tagid: parseFloat(key),\r\n                amount: tagObj[key]\r\n            })\r\n        }\r\n        return tagArr.sort((a, b) => b.amount - a.amount )\r\n    }\r\n\r\n    return {records, addRecord, findRecord, updateRecord, delRecord, getStatisticsData, getTypeTotalAmount, getTagsTotalAmount};\r\n}","\r\nimport { faBolt, faBus, faChartLine, faCoins, faEllipsisV, faGamepad, faGraduationCap, faHospital, faMoneyBill, faPhone, faToiletPaper, faTshirt, faUtensils, faYenSign, IconDefinition } from '@fortawesome/free-solid-svg-icons';\r\nimport { categoryType } from 'views/money';\r\nimport { useState } from 'react';\r\n\r\ntype TagsProps = {\r\n    id: number;\r\n    type: string;\r\n    name: string;\r\n    icon: IconDefinition;\r\n}\r\n\r\nconst defaultTags = [\r\n    { id: 1, name: '餐饮', icon: faUtensils, type: 'pay' },\r\n    { id: 2, name: '交通', icon: faBus, type: 'pay' },\r\n    { id: 3, name: '日用', icon: faToiletPaper, type: 'pay' },\r\n    { id: 4, name: '服饰', icon: faTshirt, type: 'pay' },\r\n    { id: 5, name: '娱乐', icon: faGamepad, type: 'pay' },\r\n    { id: 6, name: '学习', icon: faGraduationCap, type: 'pay' },\r\n    { id: 7, name: '医疗', icon: faHospital, type: 'pay' },\r\n    { id: 8, name: '水电', icon: faBolt, type: 'pay' },\r\n    { id: 9, name: '通讯', icon: faPhone, type: 'pay' },\r\n    { id: 10, name: '其他', icon: faEllipsisV, type: 'pay' },\r\n    { id: 11, name: '薪资', icon: faMoneyBill, type: 'revenue' },\r\n    { id: 12, name: '奖金', icon: faYenSign, type: 'revenue' },\r\n    { id: 13, name: '投资', icon: faChartLine, type: 'revenue' },\r\n    { id: 14, name: '红包', icon: faCoins, type: 'revenue' },\r\n    { id: 15, name: '其他', icon: faEllipsisV, type: 'revenue' },\r\n]\r\nexport const useTags = () => {\r\n    const [tags] = useState<TagsProps[]>(defaultTags);\r\n   \r\n    const getTag = (type: categoryType) => {\r\n        return tags.filter(item => item.type === type);\r\n    }\r\n\r\n    const findTag = (id: number) => {\r\n        if (id) {\r\n            return tags.find(item => item.id === id)\r\n        }\r\n    }\r\n\r\n    return {\r\n        tags,\r\n        getTag,\r\n        findTag\r\n    }\r\n}","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport styled from \"styled-components\";\r\n\r\nexport const MoneyTagStyle = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: flex-start;\r\n    flex-grow: 1;\r\n    margin: 0 calc(calc(25% - 64px) / 2);\r\n    margin-top: 10px;\r\n    background-color: #fff;\r\n    > div {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        align-content: flex-start;\r\n        border-radius: 10px;\r\n        box-shadow: 0px 0px 17px -1px rgb(132 132 132 / 15%);\r\n        > div {\r\n            display: flex;\r\n            flex-direction: column;\r\n            justify-content: center;\r\n            align-items: center;\r\n            margin: 10px 20px;\r\n            padding: 4px 18px;\r\n            font-size: 16px;\r\n            border-radius: 18px;\r\n            &.selected {\r\n                background: #E4BF88;\r\n            }\r\n        }\r\n    }\r\n    > button {\r\n        background: none;\r\n        color: #666;\r\n        border: none;\r\n        padding: 2px 4px;\r\n        border-bottom: 1px solid #333;\r\n    }\r\n`;\r\n\r\nexport const MoneyNoteStyle = styled.div`\r\n    margin: 0 calc(calc(25% - 64px) / 2);\r\n    margin-top: 10px;\r\n    padding: 0 16px;\r\n    background: #fff;\r\n    font-size: 14px;\r\n    border-radius: 10px;\r\n    box-shadow: 0px 0px 17px -1px rgb(132 132 132 / 15%);\r\n  > label {\r\n    display:flex;\r\n    align-items: center;\r\n    > span { margin-right: 16px; white-space: nowrap; }\r\n    > input {\r\n      display:block;\r\n      width: 100%;\r\n      height: 55px;\r\n      background: none;\r\n      border: none;\r\n      outline: none;\r\n      text-align: left;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const MoneyCategoryStyle = styled.div`\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: 24px;\r\n    background: #E4BF88;\r\n    > ul{\r\n        display:flex;\r\n        color: #333;\r\n        > li {\r\n            width: 50%; \r\n            text-align:center;\r\n            padding: 16px;\r\n            position:relative;\r\n            &.selected::after{\r\n                content: '';\r\n                display:block; \r\n                height: 3px;\r\n                background:#333;\r\n                position:absolute;\r\n                bottom:0;\r\n                width: 100%;\r\n                left: 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    > button {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 10px;\r\n        transform: translateY(-50%);\r\n        background: inherit;\r\n        border: none;\r\n        outline: none;\r\n        font-size: 24px;\r\n    }\r\n`;\r\n\r\nexport const MoneyNumberStyle = styled.div`\r\n    display:flex;\r\n    flex-direction: column;\r\n    margin-top: 10px;\r\n    > .output{\r\n        margin: 0 calc(calc(25% - 64px) / 2);\r\n        padding: 0 20px;\r\n        width: calc(100% - calc(25% - 64px));\r\n        height: 55px;\r\n        line-height: 55px;\r\n        text-align: right;\r\n        border-radius: 10px;\r\n        border: 0;\r\n        font-size: 20px;\r\n        color: #d1d1d1;\r\n        font-weight: 400;\r\n        box-shadow: 0px 0px 17px -1px rgb(132 132 132 / 15%);\r\n        background-color: #fff;\r\n        }\r\n    > .pad{ \r\n        margin-top: 10px;\r\n        background-color: #fff;\r\n        > button {\r\n            margin-bottom: 25px;\r\n            font-size: 20px; float: left; width: 25%; height: 64px; border: none;\r\n            background:#fff;\r\n                color: #E4BF88;\r\n            &.ok{ height: 128px; float: right; }\r\n            &.zero{ width: 50%; }\r\n            /* &:nth-child(1){\r\n                background:#f2f2f2;\r\n            }\r\n            &:nth-child(2),\r\n            &:nth-child(5) {\r\n                background:#E0E0E0;\r\n            }\r\n            &:nth-child(3),\r\n            &:nth-child(6),\r\n            &:nth-child(9) {\r\n                background:#D3D3D3;\r\n            }\r\n            &:nth-child(4),\r\n            &:nth-child(7),\r\n            &:nth-child(10) {\r\n                background:#C1C1C1;\r\n            }\r\n            &:nth-child(8),\r\n            &:nth-child(11),\r\n            &:nth-child(13) {\r\n                background:#B8B8B8;\r\n            }\r\n            &:nth-child(12) {\r\n                background:#9A9A9A;\r\n            }\r\n            &:nth-child(14) {\r\n                background:#A9A9A9;\r\n            } */\r\n\r\n            i {\r\n                display: inline-block;\r\n                width: 64px;\r\n                height:64px;\r\n                line-height: 64px;\r\n                background-color: #fff;\r\n                cursor: pointer;\r\n                border-radius: 100%;\r\n                transition: 250ms;\r\n                user-select: none;\r\n                box-shadow: 8px 8px 24px 0px rgb(132 132 132 / 9%);\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const MyLayout  = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100vh;\r\n`;\r\n\r\nexport const TagIcon = styled(FontAwesomeIcon)`\r\n`;","import React, { useState } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { MoneyCategoryStyle } from '../style-components';\r\nimport { faChevronLeft } from '@fortawesome/free-solid-svg-icons';\r\nimport { createHashHistory }  from 'history'; \r\n\r\ntype CategoryProps = {\r\n    value: 'pay' | 'revenue';\r\n    onChange: (value: 'pay' | 'revenue') => void;\r\n}\r\nconst MoneyCategory: React.FC<CategoryProps> = (props) => {\r\n    const [catelist] = useState<('pay' | 'revenue')[]>(['pay', 'revenue'])\r\n    const category = props.value;\r\n    const categoryMap = { 'pay': '支出', 'revenue': '收入'}\r\n    const onCategoryChange = (cate: 'pay' | 'revenue') => {\r\n        if (category !== cate) {\r\n            props.onChange(cate);\r\n        }\r\n    }\r\n\r\n    const onPushBack = () => {\r\n        createHashHistory().goBack();\r\n    }\r\n\r\n    return (\r\n        <MoneyCategoryStyle>\r\n            <button onClick={onPushBack}>\r\n                <FontAwesomeIcon icon={faChevronLeft}></FontAwesomeIcon>\r\n            </button>\r\n            <ul>\r\n                {\r\n                    catelist.map(cate => {\r\n                        return (\r\n                            <li \r\n                                className={category === cate ? 'selected' : ''}\r\n                                onClick={() => onCategoryChange(cate)}\r\n                                key={cate}\r\n                            >{ categoryMap[cate] }</li>\r\n                        )\r\n                    })\r\n                }\r\n          </ul>\r\n        </MoneyCategoryStyle>\r\n    )\r\n}\r\n\r\nexport default MoneyCategory;","import React from 'react';\r\nimport { MoneyNoteStyle } from '../style-components';\r\n\r\ntype NoteProps = {\r\n    value: string;\r\n    onChange: (note: string) => void\r\n}\r\nconst MoneyNote: React.FC<NoteProps> = (props) => {\r\n    return (\r\n        <MoneyNoteStyle>\r\n            <label>\r\n            <input \r\n                type=\"text\" \r\n                value={props.value}\r\n                onChange={(e) => props.onChange(e.target.value)}\r\n                placeholder='备注'\r\n            />\r\n          </label>\r\n        </MoneyNoteStyle>\r\n    )\r\n}\r\n\r\nexport default MoneyNote;","import React from 'react';\r\nimport { MoneyNumberStyle } from '../style-components';\r\nimport { numberOutput, numberProps } from './utils';\r\n\r\ntype moneyNumberProps = {\r\n    value: string;\r\n    onChange: (amount: string) => void;\r\n    onOk: () => void;\r\n}\r\nconst MoneyNumber: React.FC<moneyNumberProps> = (props) => {\r\n    const output = props.value;\r\n    const setOutput = (output: string) => {\r\n        let value = '0' ;\r\n        if (output.length > 16) {\r\n            value = output.slice(0, 16);\r\n        } else if (output.length === 0) {\r\n            value = '0';\r\n        } else {\r\n            value = output;\r\n        }\r\n        props.onChange(value)\r\n    }\r\n\r\n    const onClickNumber = (e: React.MouseEvent) => {\r\n        const text = (e.target as HTMLButtonElement).textContent;\r\n        if ( text === null) {return;}\r\n        if (text === 'ok') {\r\n            if (props.onOk) {\r\n                props.onOk();\r\n            }\r\n            return;\r\n        }\r\n        setOutput(numberOutput(text as numberProps, output))\r\n    }\r\n\r\n    return (\r\n        <MoneyNumberStyle>\r\n            <div className='output'>\r\n                { output }\r\n            </div>\r\n            <div className='pad clearfix' onClick={onClickNumber}>\r\n                <button>\r\n                   <i>1</i>\r\n                </button>\r\n                <button>\r\n                   <i>2</i>\r\n                </button>\r\n                <button>\r\n                   <i>3</i>\r\n                </button>\r\n                <button>\r\n                    <i>删除</i>\r\n                </button>\r\n                <button>\r\n                   <i>4</i>\r\n                </button>\r\n                <button>\r\n                   <i>5</i>\r\n                </button>\r\n                <button>\r\n                   <i>6</i>\r\n                </button>\r\n                <button>\r\n                    <i>清空</i>\r\n                </button>\r\n                <button>\r\n                   <i>7</i>\r\n                </button>\r\n                <button>\r\n                   <i>8</i>\r\n                </button>\r\n                <button>\r\n                   <i>9</i>\r\n                </button>\r\n                <button>\r\n                    <i>ok</i>\r\n                </button>\r\n                <button></button>\r\n                <button>\r\n                    <i>0</i>\r\n                </button>\r\n                <button>\r\n                    <i>.</i>\r\n                </button>\r\n                {/* <button>2</button>\r\n                <button>3</button>\r\n                <button>删除</button>\r\n                <button>4</button>\r\n                <button>5</button>\r\n                <button>6</button>\r\n                <button>清空</button>\r\n                <button>7</button>\r\n                <button>8</button>\r\n                <button>9</button>\r\n                <button className='ok'>OK</button>\r\n                <button className='zero'>0</button>\r\n                <button>.</button> */}\r\n            </div>\r\n        </MoneyNumberStyle>\r\n    )\r\n}\r\n\r\nexport default MoneyNumber;","export type numberProps = '0' | '1'| '2' | '3'| '4'| '5'| '6'| '7'| '8'| '9'| '.'| '删除' | '清空';\r\n\r\nexport const  numberOutput = (text: numberProps, output = '0') => {\r\n    switch (text) {\r\n        case '0':\r\n        case '1':\r\n        case '2':\r\n        case '3':\r\n        case '4':\r\n        case '5':\r\n        case '6': \r\n        case '7':\r\n        case '8':\r\n        case '9':\r\n            if (output === '0') {\r\n                return text;\r\n            } else {\r\n                return (output + text)\r\n            }\r\n        case '.':\r\n            if (output.indexOf('.') >= 0) {\r\n                return output;\r\n            }\r\n            return (output + '.')\r\n        case '删除':\r\n            if  (output.length === 1) {\r\n                return ('0');\r\n            } else {\r\n                return (output.slice(0, -1) || '0');\r\n            }\r\n        case '清空':\r\n            return ('0');\r\n        default:\r\n            return '0';\r\n    }\r\n}","import React from \"react\";\r\nimport { categoryType } from \"..\";\r\nimport { MoneyTagStyle, TagIcon } from \"../style-components\";\r\nimport { useTags } from './../../../hooks/useTags';\r\n\r\ntype TagProps = {\r\n    value: number,\r\n    category: categoryType,\r\n    onChange: (selected: number) => void;\r\n}\r\nconst MoneyTag: React.FC<TagProps> = (props) => {\r\n    const selectedTags = props.value;\r\n    const { getTag } = useTags();\r\n    const tags = getTag(props.category);\r\n    const onToggleTag = (tag: number) => {\r\n        const isSelect = selectedTags === tag;\r\n        if (!isSelect) {\r\n            props.onChange(tag)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <MoneyTagStyle>\r\n            <div>\r\n                {\r\n                    tags.map(item => {\r\n                        return (\r\n                            <div \r\n                                key={item.id} \r\n                                onClick={() => onToggleTag(item.id)}\r\n                                className={selectedTags === item.id  ? 'selected' : ''}\r\n                            >\r\n                                <TagIcon icon={ item.icon }></TagIcon>\r\n                                {item.name}\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n          </div>\r\n        </MoneyTagStyle>\r\n    )\r\n}\r\n\r\nexport default MoneyTag;","import React, { useState } from \"react\";\r\nimport { useRecords } from \"hooks/useRecords\";\r\nimport { useTags } from \"hooks/useTags\";\r\nimport { createHashHistory }  from 'history'; \r\nimport MoneyCategory from \"./money-category\";\r\nimport MoneyNote from \"./money-note\";\r\nimport MoneyNumber from \"./money-number\";\r\nimport MoneyTag from \"./money-tag\";\r\nimport { MyLayout } from \"./style-components\";\r\n\r\nexport type categoryType = 'pay' | 'revenue';\r\n\r\nconst defaultFormData = {\r\n  tagIds: 1,\r\n  note: '',\r\n  category: 'pay' as categoryType,\r\n  amount: '0'\r\n}\r\nconst Money: React.FunctionComponent = (props) =>  {\r\n    const [selected, setSelected] = useState(defaultFormData)\r\n    const { getTag } = useTags()\r\n    const {addRecord} = useRecords();\r\n    \r\n    const onChange = (obj: Partial<typeof selected>) => {\r\n      setSelected({ ...selected, ...obj })\r\n    }\r\n\r\n    const layoutChange = (obj: Partial<typeof selected>) => {\r\n      const tags = getTag(obj.category!)\r\n      obj.tagIds = tags[0].id;\r\n      onChange(obj);\r\n    }\r\n\r\n    const submit = () => {\r\n      if (addRecord(selected)) {\r\n        setSelected(defaultFormData);\r\n        createHashHistory().push('/')\r\n      }\r\n    };\r\n\r\n    return (\r\n      <MyLayout>\r\n         <MoneyCategory\r\n          value={selected.category}\r\n          onChange={(category) => layoutChange({category})}\r\n        />\r\n        \r\n        <MoneyTag \r\n          value={selected.tagIds}\r\n          category={selected.category}\r\n          onChange={(tags) => onChange({tagIds: tags})}\r\n        />\r\n\r\n        <MoneyNote\r\n          value={selected.note}\r\n          onChange={(note) => onChange({note})}\r\n        />\r\n\r\n       \r\n\r\n        <MoneyNumber\r\n          value={selected.amount}\r\n          onChange={(amount) => onChange({amount})}\r\n          onOk={submit}\r\n        />\r\n\r\n      </MyLayout>\r\n    )\r\n  }\r\n\r\n  export default Money","import React from \"react\";\r\n\r\nconst Nomatch = () => {\r\n    return <div>404</div>\r\n}\r\n\r\nexport default Nomatch;","import styled from \"styled-components\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nexport const MyNav = styled.nav`\r\n    line-height: 24px;\r\n    box-shadow: 0 0 3px rgba(0, 0, 0, .25);\r\n    background-color: #fff;\r\n    > ul {\r\n        display: flex;\r\n        > li{\r\n            padding: 16px;\r\n            width: 33.3333%;\r\n            text-align: center;\r\n        }\r\n    }\r\n`;\r\n\r\nexport const MyLink = styled(NavLink)`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    &.selected {\r\n        color: #E4BF88;\r\n    }\r\n`;\r\n\r\nexport const MyIcon = styled(FontAwesomeIcon)`\r\n    font-size: 24px;\r\n`;","import React from 'react';\r\nimport * as FaIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { MyIcon, MyLink, MyNav } from './style-components';\r\n\r\nconst Nav =  () => (\r\n    <MyNav>\r\n          <ul>\r\n            <li>\r\n              <MyLink to='/tags' activeClassName='selected'>\r\n                <MyIcon icon={FaIcons['faTag']}></MyIcon>\r\n                本月概况\r\n              </MyLink>\r\n            </li>\r\n            <li>\r\n              <MyLink to='/money' activeClassName='selected'>\r\n                <MyIcon icon={FaIcons['faYenSign']}></MyIcon>\r\n                记账页\r\n                </MyLink>\r\n            </li>\r\n            <li>\r\n              <MyLink to='/statistics' activeClassName='selected'>\r\n                <MyIcon icon={FaIcons['faChartBar']}></MyIcon>\r\n                图标页\r\n              </MyLink>\r\n            </li>\r\n          </ul>\r\n        </MyNav>\r\n)\r\n\r\nexport default Nav;","import styled from \"styled-components\";\r\n\r\nexport const Wrapper = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100vh;\r\n`;\r\n\r\nexport const Main = styled.div`\r\n    flex-grow: 1;\r\n    overflow: auto;\r\n`;","import React from 'react';\r\nimport Nav from 'components/Nav';\r\nimport { Main, Wrapper } from './style-components';\r\n\r\ninterface layoutProps {\r\n    className?: string;\r\n}\r\nconst Layout: React.FunctionComponent<layoutProps> = (props) => {\r\n    return (\r\n        <Wrapper>\r\n            <Main className={props.className}>\r\n                { props.children }\r\n            </Main>\r\n            <Nav></Nav>\r\n        </Wrapper>\r\n    )\r\n}\r\n\r\nexport default Layout;","import styled from \"styled-components\";\r\n\r\nexport const StaWrapper = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100%;\r\n    overflow: auto;\r\n\r\n    \r\n`;\r\n\r\nexport const StaHeader = styled.header`\r\n    display: flex;\r\n    justify-content: space-around;\r\n    padding: 8px 16px;\r\n    background: #E4BF88;\r\n\r\n    > button {\r\n        width: 40%;\r\n        background: none;\r\n        outline: none;\r\n        padding: 4px;\r\n        border-radius: 10px;\r\n        border: 1px solid #333;\r\n\r\n        &.selected {\r\n            background: #333;\r\n            color: #E4BF88;\r\n        }\r\n    }\r\n`;\r\n\r\nexport const StaList = styled.div`\r\n    padding: 6px 16px;\r\n\r\n    .title {\r\n        font-size: 14px;\r\n        text-align: left;\r\n    }\r\n\r\n    li {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding: 12px 0;\r\n\r\n        > div {\r\n            display: flex;\r\n            align-items: center;\r\n            font-size: 14px;\r\n        }\r\n        .icon {\r\n            margin-right: 8px;\r\n            width: 32px;\r\n            height: 32px;\r\n        }\r\n    }\r\n`;","import React, { useEffect, useRef } from \"react\";\r\nimport * as echarts from 'echarts';\r\n\r\nconst BarChart: React.FC<any> = ({option}) => {\r\n    const container = useRef<HTMLDivElement>(null);\r\n    const chart = useRef<any>(null);\r\n    \r\n      \r\n    useEffect(() => {\r\n        if (container && container.current &&  chart) {\r\n          \r\n          const width = document.documentElement.clientWidth;\r\n          container.current.style.width = `100%`;\r\n          container.current.style.height = `${(width - 20) * 1.2}px`;\r\n          \r\n          chart.current = echarts.init(container.current, 'dart')\r\n        }\r\n    \r\n      }, []);\r\n\r\n      useEffect(() => {\r\n        chart.current.setOption(option);\r\n      }, [option]);\r\n\r\n    return (\r\n        <div ref={container} />\r\n    )\r\n}\r\n\r\nexport default BarChart;","import React, { useCallback, useState } from \"react\";\r\nimport Layout from \"components/Layout\";\r\n\r\nimport { StaHeader, StaList, StaWrapper } from \"./style-component\";\r\nimport { useRecords } from \"hooks/useRecords\";\r\nimport { useTags } from \"hooks/useTags\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport BarChart from \"./bar-chart\";\r\n\r\nconst Statistics: React.FunctionComponent = () => {\r\n  \r\n  const [type, setType] = useState('pay');\r\n  const { getStatisticsData, getTypeTotalAmount, getTagsTotalAmount } = useRecords();\r\n  const { findTag } = useTags();\r\n  const { month, totalPrice, } = getStatisticsData(type);\r\n  const tagsAmount = getTagsTotalAmount(type);\r\n  const totalAmount = useCallback(\r\n    () => {\r\n      let total = getTypeTotalAmount(type);\r\n      let text = `${ type === 'pay' ? '支出' : '收入' }: ￥${ total }`\r\n      return text;\r\n      \r\n    },\r\n    [type, getTypeTotalAmount],\r\n  )\r\n  const option = {\r\n    title: {\r\n      text: totalAmount()\r\n    },\r\n    tooltip: {},\r\n    xAxis: {\r\n      data: month\r\n    },\r\n    yAxis: {\r\n      type: 'value'\r\n    },\r\n    series: [\r\n      {\r\n        data: totalPrice,\r\n        type: 'bar'\r\n      }\r\n    ]\r\n  }\r\n  \r\n  const onTagChange = (tag: string) => {\r\n      if (tag !== type) {\r\n        setType(tag);\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Layout>\r\n        <StaWrapper>\r\n          <StaHeader>\r\n            <button className={type === 'pay' ? 'selected' : ''} onClick={() => onTagChange('pay')}>支出</button>\r\n            <button className={type === 'revenue' ? 'selected' : ''}  onClick={() => onTagChange('revenue')}>收入</button>\r\n          </StaHeader>\r\n\r\n          <BarChart option={option}></BarChart>\r\n          {\r\n            tagsAmount && tagsAmount.length !== 0 && (\r\n              <StaList>\r\n              <div className='title'>{ type === 'pay' ? '支出' : '收入' }排行榜</div>\r\n              <ul>\r\n                {\r\n                  tagsAmount && tagsAmount.map(item => {\r\n                    const tag = findTag(item.tagid);\r\n                    return (\r\n                        <li key={item.tagid}>\r\n                          <div>\r\n                            <FontAwesomeIcon className='icon' icon={tag!.icon}></FontAwesomeIcon>\r\n                          </div>\r\n                          <span>\r\n                              { tag?.name }\r\n                            </span>\r\n                          {item.amount}\r\n                        </li>\r\n                    )\r\n                  })\r\n                }\r\n              </ul>\r\n            </StaList>\r\n            )\r\n          }\r\n\r\n         \r\n        </StaWrapper>\r\n      </Layout>\r\n    )\r\n  }\r\n\r\nexport default Statistics;","import styled from \"styled-components\";\r\n\r\nexport const TagHeader = styled.header`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 12px 16px;\r\n    font-size: 16px;\r\n    text-align: center;\r\n    background-color: #E4BF88;\r\n\r\n    > button {\r\n        background: none;\r\n        color: #666;\r\n        border: none;\r\n        font-size: 24px;\r\n    }\r\n\r\n    .tag-icon {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n\r\n    .empty {\r\n        width: 24px;\r\n        height: 24px;\r\n    }\r\n`;\r\n\r\nexport const InputTitle = styled.div`\r\n    margin: 0 calc(calc(25% - 64px) / 2);\r\n    margin-top: 10px;\r\n    padding: 0 16px;\r\n    text-align: center;\r\n`;\r\n\r\nexport const ButtonGroup = styled.div`\r\n    margin-top: 44px;\r\n    padding: 16px;\r\n    text-align: center;\r\n\r\n    button {\r\n        color: #fff;\r\n        font-size: 18px;\r\n        border-radius: 10px;\r\n        border: none;\r\n        width: 70px;\r\n        height: 40px;\r\n\r\n        &.update {\r\n            background: #E4BF88;\r\n        }\r\n\r\n        &.del {\r\n            margin-left: 15px;\r\n            background-color: #8b0000;\r\n        }\r\n    }\r\n    \r\n`;","import { faChevronLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useRecords } from \"hooks/useRecords\";\r\nimport React, { useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { createHashHistory }  from 'history'; \r\nimport { ButtonGroup, InputTitle, TagHeader } from \"./style-component\";\r\nimport { useTags } from \"hooks/useTags\";\r\nimport { MoneyNoteStyle } from \"views/money/style-components\";\r\n\r\ntype Params = {\r\n    id: string\r\n}\r\nconst Tag: React.FunctionComponent<any> = (props) => {\r\n    let { id } = useParams<Params>();\r\n    const { findRecord, updateRecord, delRecord } = useRecords();\r\n    const { findTag } = useTags();\r\n    const record = findRecord(id);\r\n    const tag = record ? findTag(record.tagIds) : null;\r\n    const [obj, setObj] = useState({ amount: record ? record.amount : '', note: ''});\r\n    \r\n    const onPushBack = () => {\r\n        createHashHistory().goBack();\r\n    }\r\n\r\n    const onInputChange = (key: string, e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setObj({\r\n            ...obj,\r\n            [key]: e.target.value\r\n        })\r\n    }\r\n\r\n    const onUpdateRecord = () => {\r\n        if (record) {\r\n            updateRecord(record.id, obj);\r\n            onPushBack();\r\n        }\r\n    }\r\n\r\n    const onDeleteRecord = () => {\r\n        if (record) {\r\n            delRecord(record.id);\r\n            onPushBack();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <TagHeader>\r\n                <button onClick={onPushBack}>\r\n                    <FontAwesomeIcon icon={faChevronLeft}></FontAwesomeIcon>\r\n                </button>\r\n\r\n                {tag && (\r\n                    <div className='tag-icon'>\r\n                        <FontAwesomeIcon icon={ tag.icon }></FontAwesomeIcon>\r\n                        { tag.name }\r\n                    </div>\r\n                )}\r\n                <span className='empty'></span>\r\n            </TagHeader>\r\n\r\n            <div>\r\n                <InputTitle>金额</InputTitle>\r\n                <MoneyNoteStyle>\r\n                    <label>\r\n                        <input \r\n                            type=\"number\"\r\n                            value={obj.amount}\r\n                            onChange={(e) => onInputChange('amount', e)}\r\n                        />\r\n                    </label>\r\n                </MoneyNoteStyle>\r\n\r\n                <InputTitle>备注</InputTitle>\r\n                <MoneyNoteStyle>\r\n                    <label>\r\n                        <input \r\n                            type=\"text\" \r\n                            value={obj.note}\r\n                            onChange={(e) => onInputChange('note', e)}\r\n                        />\r\n                    </label>\r\n                </MoneyNoteStyle>\r\n            </div>\r\n\r\n            <ButtonGroup>\r\n                <button className='update' onClick={onUpdateRecord}>修改</button>\r\n                <button className='del' onClick={onDeleteRecord}>删除</button>\r\n            </ButtonGroup>\r\n        </>\r\n       \r\n\r\n    )\r\n}\r\n\r\nexport default Tag;","import styled from \"styled-components\";\r\n\r\nexport const TagsWrapper = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100%;\r\n    overflow: auto;\r\n`;\r\n\r\nexport const Header = styled.header`\r\n    background: #E4BF88;\r\n`;\r\n\r\nexport const Title = styled.div`\r\n    text-align: center;\r\n    font-size: 18px;\r\n    font-weight: 500;\r\n    padding: 10px;\r\n`;\r\n\r\nexport const Info = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 4px 0;\r\n`;\r\n\r\nexport const Calendar = styled.div`\r\n    position: relative;\r\n    display: flex;\r\n    padding: 0 16px;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    & > .year {\r\n        font-size: 12px;\r\n        color: #a38932;\r\n        padding: 0 3px;\r\n        margin-bottom: 5px;\r\n    }\r\n\r\n    & > .month {\r\n        font-size: 12px;\r\n        padding: 0 3px;\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n`;\r\n\r\nexport const Total = styled.div`\r\n    display: flex;\r\n    justify-content: space-around;\r\n    flex-grow: 1;\r\n    padding: 4px 16px;\r\n\r\n    & > .label {\r\n        font-size: 12px;\r\n        color: #a38932;\r\n        margin-bottom: 4px;\r\n    }\r\n\r\n    & > .value {\r\n        font-size: 20px;\r\n    }\r\n`;\r\n\r\nexport const Main = styled.div`\r\n    flex-grow: 1;\r\n    padding: 12px 16px;\r\n    overflow: auto;\r\n\r\n    > .empty {\r\n        text-align: center;\r\n        > .icon {\r\n            font-size: 50px;\r\n        }\r\n        > div {\r\n            margin-top: 10px;\r\n        }\r\n    }\r\n\r\n    .tag-item {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin-top: 10px;\r\n        padding: 10px 8px;\r\n        border-radius: 10px;\r\n        box-shadow: 0px 0px 17px -1px rgb(132 132 132 / 15%);\r\n\r\n        .tag-item-cate {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            font-size: 14px;\r\n            font-weight: 400;\r\n        }\r\n\r\n        .tag-item-amount {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: flex-end;\r\n            color: #c5c5c5;\r\n            font-size: 12px;\r\n\r\n            .price {\r\n                font-size: 16px;\r\n                font-weight: 700;\r\n                color: #000;\r\n            }\r\n        }\r\n\r\n        .icon {\r\n            width: 20px;\r\n            height: 20px;\r\n        }\r\n    }\r\n`;","import React from 'react';\r\nimport Layout from \"components/Layout\";\r\nimport { add } from 'mathjs';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Calendar, Header, Info, Main, TagsWrapper, Title, Total } from './style-component';\r\nimport { useRecords } from 'hooks/useRecords';\r\nimport { faExclamationCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport { useTags } from 'hooks/useTags';\r\nimport { Link } from 'react-router-dom';\r\nimport day from 'dayjs';\r\nimport { useUpdate } from 'hooks/useUpdate';\r\nimport { useState } from 'react';\r\n\r\nconst Tags:React.FunctionComponent = () => {\r\n    const {records} = useRecords();\r\n    const { findTag } = useTags();\r\n    const [isEmpty , setIsEmpty] = useState(true);\r\n    const [isLoading, setLoading] = useState(true);\r\n    const getRevenue = (type: 'revenue'| 'pay') => {\r\n      return records\r\n                  .filter(item => item.category === type)\r\n                  .reduce((total: any, item) => {\r\n                    return add(parseFloat(item.amount), total);\r\n                  }, 0);\r\n    }\r\n\r\n    useUpdate(() => {\r\n      setIsEmpty(!records || records.length === 0);\r\n      setLoading(false);\r\n    }, records)\r\n    return (\r\n      <Layout>\r\n        <TagsWrapper>\r\n        <Header>\r\n          <Title>我的账本</Title>\r\n          <Info>\r\n            <Calendar>\r\n              <div className='year'>{ new Date().getFullYear() } 年</div>\r\n              <div className='month'>{ new Date().getMonth() + 1 } 月</div>\r\n            </Calendar>\r\n            <Total>\r\n              <div>\r\n                <div className='label'>收入</div>\r\n                <div className=\"value\">￥{ getRevenue('revenue') }</div>\r\n              </div>\r\n              <div>\r\n                <div className='label'>支出</div>\r\n                <div className=\"value\">￥{ getRevenue('pay') }</div>\r\n              </div>\r\n            </Total>\r\n          </Info>\r\n        </Header>\r\n\r\n        <Main>\r\n          { !isLoading && isEmpty && (\r\n            <div className='empty'>\r\n              <FontAwesomeIcon className='icon' icon={faExclamationCircle}></FontAwesomeIcon>\r\n              <div>暂时还没有记录. 快去记一笔吧~</div>\r\n            </div>\r\n            )\r\n          }\r\n\r\n          {\r\n            !isLoading && !isEmpty && records.map(item => {\r\n              return (\r\n                <Link key={item.createdAt} to={'/tags/' + item.id}>\r\n                <div className='tag-item'>\r\n                  <FontAwesomeIcon className='icon' icon={ findTag(item.tagIds)!.icon}></FontAwesomeIcon>\r\n                  <span className='tag-item-cate'>{ findTag(item.tagIds)!.name }</span>\r\n                  <span className='tag-item-amount'>\r\n                    <span className='price'>￥{ item.category === 'pay' ? '-' : '+'}{item.amount}</span>\r\n                    {day(item.createdAt).format('YYYY-MM-DD')}\r\n                  </span>\r\n                </div>\r\n                </Link>\r\n                \r\n              )\r\n            })\r\n          }\r\n        </Main>\r\n        </TagsWrapper>\r\n        \r\n      </Layout>\r\n    )\r\n  }\r\nexport default Tags","import React from 'react';\nimport { HashRouter, Route, Redirect, Switch } from 'react-router-dom';\nimport Money from 'views/money';\nimport Nomatch from 'views/no-match';\nimport Statistics from 'views/statistics';\nimport Tag from 'views/tag';\nimport Tags from 'views/tags';\n\nfunction App() {\n  return (\n    <HashRouter>\n          <Switch>\n            <Route exact path=\"/tags/:id\">\n              <Tag />\n            </Route>\n            <Route exact path=\"/tags\">\n              <Tags></Tags>\n            </Route>\n            <Route exact path=\"/money\">\n              <Money></Money>\n            </Route>\n            <Route exact path=\"/statistics\">\n              <Statistics></Statistics>\n            </Route>\n\n            <Redirect exact from='/' to='/tags' />\n            <Route path='*'>\n              <Nomatch></Nomatch>\n            </Route>\n          </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}